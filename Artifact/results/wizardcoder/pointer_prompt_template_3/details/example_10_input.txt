[{"role": "system", "content": "You are a program analyst specializing in security vulnerabilities related to memory, buffer, and pointer misuse."}, {"role": "user", "content": "The following C / C++ code may or may not contain misuses such as memory, buffer or pointer issues, and is enclosed in triple backticks. Analyze the following code\n'''\nint send_msg(char *ptr, int len) {\n    while(i < len) {\n        buf_write_msg(ptr + i);\n        i++;\n    }\n    free(ptr);\n    return i;\n}\n\nint tx_int(char *ptr) {\n    int val = OBJ_SIZE;\n    while(val < OBJ_SIZE) {\n        send_msg(ptr, 16);\n    }\n    free(ptr);\n}\n'''"}]