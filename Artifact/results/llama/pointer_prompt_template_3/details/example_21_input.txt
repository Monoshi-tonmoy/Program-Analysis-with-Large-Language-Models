[{"role": "system", "content": "You are a program analyst specializing in security vulnerabilities related to memory, buffer, and pointer misuse."}, {"role": "user", "content": "The following C / C++ code may or may not contain misuses such as memory, buffer or pointer issues, and is enclosed in triple backticks. Analyze the following code\n'''\nchar* trimTrailingWhitespace(char *strMessage, int length) {\n    char *retMessage;\n    char *message = malloc(sizeof(char)*(length+1));\n\n    // copy input string to a temporary string\n    char message[length+1];\n    int index;\n    for (index = 0; index < length; index++) {\n        message[index] = strMessage[index];\n    }\n    message[index] = '\\0';\n\n    // trim trailing whitespace\n    int len = index-1;\n    while (isspace(message[len])) {\n        message[len] = '\\0';\n        len--;\n    }\n\n    // return string without trailing whitespace\n    retMessage = message;\n    return retMessage;\n}\n'''"}]