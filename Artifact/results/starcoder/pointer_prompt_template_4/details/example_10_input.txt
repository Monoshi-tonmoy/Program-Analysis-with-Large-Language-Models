[{"role": "system", "content": "You are a super smart Program Analyst."}, {"role": "user", "content": "Analyze this code snippet given by triple backticks for the following:\n-Bad pointer arithmetic\n-Unsafe dereferencing\n-Buffer overflow or buffer underwrite\n-Bad allocation / deallocation\n-Improper sanitization of input\n\n'''\nint send_msg(char *ptr, int len) {\n    while(i < len) {\n        buf_write_msg(ptr + i);\n        i++;\n    }\n    free(ptr);\n    return i;\n}\n\nint tx_int(char *ptr) {\n    int val = OBJ_SIZE;\n    while(val < OBJ_SIZE) {\n        send_msg(ptr, 16);\n    }\n    free(ptr);\n}\n'''"}]